<!--
DeepSeek AI Web Crawler
Copyright (c) 2025 Ayaz MensyoÄŸlu

This file is part of the DeepSeek AI Web Crawler project.
Licensed under the Apache License, Version 2.0.
See NOTICE file for additional terms and conditions.
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepSeek AI Web Crawler</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="/static/css/index.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid">
        <div class="main-container">
            <!-- Header -->
            <div class="header">
                <h1><i class="fas fa-spider"></i> DeepSeek AI Web Crawler</h1>
                <p>Intelligent web crawling with AI-powered data extraction</p>
            </div>

            <!-- Main Content -->
            <div class="content">
                <!-- File Upload Section -->
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-file-csv"></i> CSV File Upload
                    </div>
                    <div class="card-body">
                        <div class="file-upload-area" id="fileUploadArea">
                            <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                            <h5>Drop your CSV file here or click to browse</h5>
                            <p class="text-muted">The CSV should contain columns: url, css_selector, button_selector, pdf_selector</p>
                            <input type="file" id="csvFile" accept=".csv" style="display: none;">
                            <button class="btn btn-outline-primary" onclick="document.getElementById('csvFile').click()">
                                <i class="fas fa-folder-open"></i> Choose File
                            </button>
                        </div>
                        <div id="fileInfo" class="mt-3" style="display: none;">
                            <div class="alert alert-success">
                                <i class="fas fa-check-circle"></i>
                                <strong>File uploaded successfully!</strong>
                                <span id="fileName"></span>
                                <br>
                                <small>Total sites: <span id="totalSites"></span></small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Configuration Section -->
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-cog"></i> API Configuration
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-12">
                                <label for="apiKey" class="form-label">API Key</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="apiKey" placeholder="Enter your Groq API key">
                                    <button class="btn btn-outline-secondary" type="button" onclick="togglePassword()">
                                        <i class="fas fa-eye" id="eyeIcon">.</i>
                                    </button>
                                </div>
                                <div class="form-text">
                                    Using Groq - Llama 3.1 8B Instant model
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- PDF Settings Section -->
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-file-pdf"></i> PDF Download Settings
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <label for="pdfSizeLimit" class="form-label">Maximum PDF Size (MB)</label>
                                <input type="number" class="form-control" id="pdfSizeLimit" 
                                       placeholder="25" min="1" max="100" value="25">
                                <div class="form-text">
                                    PDFs larger than this size will be skipped during download
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="skipLargeFiles" class="form-label">Skip Large Files</label>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="skipLargeFiles" checked>
                                    <label class="form-check-label" for="skipLargeFiles">
                                        Automatically skip files larger than the size limit
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Control Section -->
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-play-circle"></i> Crawling Controls
                    </div>
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-md-6">
                                <div class="d-flex align-items-center mb-3">
                                    <span class="status-indicator" id="statusIndicator"></span>
                                    <span id="statusText">Ready to start</span>
                                </div>
                                <div class="progress mb-3" id="progressBar" style="display: none;">
                                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                                </div>
                            </div>
                            <div class="col-md-6 text-end">
                                <button class="btn btn-success me-2" id="startBtn" onclick="startCrawling()">
                                    <i class="fas fa-play"></i> Start Crawling
                                </button>
                                <button class="btn btn-danger" id="stopBtn" onclick="stopCrawling()" disabled>
                                    <i class="fas fa-stop"></i> Stop Crawling
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Statistics Section -->
                <div class="row" id="statsSection" style="display: none;">
                    <div class="col-md-3">
                        <div class="stats-card">
                            <div class="stats-number" id="currentSite">0</div>
                            <div class="stats-label">Current Site</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card">
                            <div class="stats-number" id="totalSitesStats">0</div>
                            <div class="stats-label">Total Sites</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card">
                            <div class="stats-number" id="currentPage">1</div>
                            <div class="stats-label">Current Page</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="stats-card">
                            <div class="stats-number" id="totalVenues">0</div>
                            <div class="stats-label">Total Products</div>
                        </div>
                    </div>
                </div>

                <!-- Logs Section -->
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-terminal"></i> Processing Logs
                        </div>
                        <div>
                            <a href="/files" class="btn btn-sm btn-success me-2" target="_blank">
                                <i class="fas fa-folder-open"></i> Browse Files
                            </a>
                            <button class="btn btn-sm btn-outline-primary" onclick="downloadOutput()">
                                <i class="fas fa-download"></i> Download Output
                            </button>
                            <a href="/products" class="btn btn-sm btn-outline-secondary ms-2" target="_blank">
                                <i class="fas fa-box"></i> Install Products Individually
                            </a>
                            <button class="btn btn-sm btn-outline-secondary" onclick="clearLogs()">
                                <i class="fas fa-trash"></i> Clear Logs
                            </button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="log-container" id="logContainer">
                            <div class="log-entry">
                                <span class="log-timestamp">[System]</span>
                                <span class="log-info">Web crawler interface ready. Upload a CSV file to begin.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/index.js"></script>
</body>
</html> 